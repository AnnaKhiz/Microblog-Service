extends layout

block content
  div.content
    p.content__title Posts
    if locals.id
      button#create-post.button Create post
      +add-post-form('add', 'add-close', 'Publish', 'btn-publish', 'name', 'description', '/user_home/:id')
      +add-post-form('edit', 'edit-close', 'Send changes', 'btn-save', 'edit-name', 'edit-description', `/user_home/:id/edit`)
    if locals.posts.length === 0
      p.content__warning You don't have any posts yet. Create first right now.
    else
      each post in locals.posts
        div.content__block
          div.content__info
            p.content__label= post.name
            p= post.description
            div.comments-container.content__comments-container.hidden
              if post.comments.length === 0
                p.content__comments No comments yet
              else
                each comment in post.comments
                  p.content__comments= comment.text
              if locals.id
                form(method="POST", action=`/user_home/${locals.id}/comment`).form-comment.content__form.hidden
                  textarea#comment-input(placeholder="Enter your comment", name="text", required, rows="3", width="100%", class="comment")
                  button#comment-submit-btn.button.control(type="submit") Send

          if locals.id
            div(data-id= post.date).content__control
              button.comments-btn.button.control Comments
              if locals.id === post.author.id
                button.edit-btn.button.control Edit
                button.del-btn.button.control Delete
          else
            div.content__control(data-id= post.date)
              button.comments-btn.button.control Comments



